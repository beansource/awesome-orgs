name: Issue Parser ðŸ¤“

on:
  workflow_dispatch:
    inputs:
      issue_number:
        type: string
        required: true

jobs:
  parser:
    runs-on: ubuntu-latest
    steps:
      # - name: Fetch the issue
      #   id: read_issue_body
      #   run:
      #     echo "body=$(gh issue view ${{ inputs.issue_number }} --repo ${{ github.repo }} --json body --jq '.body')" >> $GITHUB_OUTPUT

      - name: Issue Forms Body Parser
        id: parse
        uses: zentered/issue-forms-body-parser@v2.1.1
        with:
          body: >
            ### Org name

            unified

            ### Handle

            unifiedjs

            ### Description

            content as structured data, powering @remarkjs, @rehypejs, @retextjs, and @redotjs, used to build things like @mdx-js, @prettier, @gatsbyjs, and so much more!

            ### Org category

            Web

            ### New category

            _No response_

            ### What makes this org awesome?

            Tons of useful repos, powers a lot of other orgs and projects, uses org discussions, good org readme, has a website, twitter, email, verified, and much more!

            ### Criteria

            - [X] I attest!

            ### Code of conduct

            - [X] I agree to follow `awesome-orgs`'s Code of Conduct

      - name: Checkout
        uses: actions/checkout@v2

      - uses: actions/github-script@v6
        id: js
        with: 
          github-token: nothing
          script: |
            const script = require('./scripts/super-insane-cool-parser.js')
            script({ github, context, core, mkdownData: ${{ steps.parse.outputs.data }} })
      